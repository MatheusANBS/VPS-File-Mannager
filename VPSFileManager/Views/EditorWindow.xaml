<ui:FluentWindow x:Class="VPSFileManager.Views.EditorWindow"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
                Title="{Binding Title}"
                Width="900"
                Height="700"
                WindowStartupLocation="CenterScreen"
                ExtendsContentIntoTitleBar="True"
                WindowBackdropType="Mica">
    
    <Window.InputBindings>
        <KeyBinding Key="S" Modifiers="Ctrl" Command="{Binding SaveCommand}"/>
        <KeyBinding Key="W" Modifiers="Ctrl" Command="{Binding CloseCommand}"/>
    </Window.InputBindings>
    
    <Grid Background="{DynamicResource ApplicationBackgroundBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Background="{DynamicResource CardBackgroundBrush}" Padding="20,16" BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal">
                    <ui:SymbolIcon Symbol="DocumentEdit24" FontSize="24" Foreground="{DynamicResource SystemAccentColorPrimaryBrush}"/>
                    <StackPanel Margin="16,0,0,0">
                        <TextBlock Text="{Binding FileName}" FontWeight="Bold" FontSize="16"/>
                        <TextBlock Text="{Binding FilePath}" Opacity="0.4" FontSize="11" Margin="0,2,0,0"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <ui:Button Command="{Binding SaveCommand}" Icon="{ui:SymbolIcon Save24}" Content="Save Changes" Appearance="Primary" Margin="0,0,12,0" Padding="16,8"/>
                    <ui:Button Command="{Binding CloseCommand}" Icon="{ui:SymbolIcon Dismiss24}" Content="Close" Appearance="Transparent" Padding="12,8"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Editor Area -->
        <avalonEdit:TextEditor Grid.Row="1"
                               x:Name="TextEditor"
                               FontFamily="Cascadia Code, Consolas"
                               FontSize="14"
                               ShowLineNumbers="True"
                               Background="{DynamicResource ApplicationBackgroundBrush}"
                               Foreground="{DynamicResource TextFillColorPrimaryBrush}"
                               LineNumbersForeground="{DynamicResource TextFillColorSecondaryBrush}"
                               Padding="16"/>

        <!-- Footer -->
        <Border Grid.Row="2" Background="{DynamicResource CardBackgroundBrush}" Padding="16,8" BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}" BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding LineCount, StringFormat='Lines: {0}'}" FontSize="11" Opacity="0.5" Margin="0,0,24,0"/>
                    <TextBlock Text="{Binding FileSize, StringFormat='Size: {0}'}" FontSize="11" Opacity="0.5"/>
                </StackPanel>
                <TextBlock Grid.Column="2" Text="{Binding StatusMessage}" FontSize="11" FontWeight="Medium" Foreground="{DynamicResource SystemAccentColorPrimaryBrush}"/>
            </Grid>
        </Border>
    </Grid>
</ui:FluentWindow>
